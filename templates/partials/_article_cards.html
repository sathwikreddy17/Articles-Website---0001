{# Masonry-ready card grid items; used by HTMX infinite scroll and normal render #}
<div class="row g-3 articles-grid">
  {% for a in items %}
    <div class="col-sm-6 col-lg-4 article-card">
      <div class="card h-100 shadow-sm">
        <div class="card-body">
          <h5 class="card-title"><a href="{{ url_for('main.article_by_slug', slug=a.slug) }}" class="stretched-link">{% if q %}{{ a.title|highlight(q) }}{% else %}{{ a.title }}{% endif %}</a></h5>
          {% if q %}
          <p class="card-text small text-muted">{{ (a.body[:180] ~ ('...' if a.body|length > 180 else ''))|highlight(q) }}</p>
          {% endif %}
          {% if a.tags %}
          <div>
            {% for t in a.tags.split(',') %}
              {% set tag = t.strip() %}
              <a class="badge bg-secondary text-decoration-none me-1" href="{{ url_for('main.by_tag', tag=tag) }}">{{ tag }}</a>
            {% endfor %}
          </div>
          {% endif %}
        </div>
      </div>
    </div>
  {% endfor %}
</div>
